2025-10-13T08:09:25.827743: ğŸ”¬ STEP 2 EXPERIMENTAL SETUP
2025-10-13T08:09:25.829489: ------------------------------
2025-10-13T08:09:25.830626: ğŸ“¦ Loading quality control components...
2025-10-13T08:09:31.611597: âœ… Quality control components loaded successfully
2025-10-13T08:09:31.612492: ğŸ“Š Testing quality control on 2 datasets:
2025-10-13T08:09:31.613445:   1. PL_Neg_Waters_qTOF.mzML
2025-10-13T08:09:31.614280:   2. TG_Pos_Thermo_Orbi.mzML
2025-10-13T08:09:31.615520: ğŸ¯ Quality thresholds to test: [0.1, 0.3, 0.5, 0.7, 0.9]
2025-10-13T08:09:31.616261: 
ğŸš€ STARTING QUALITY CONTROL VALIDATION
2025-10-13T08:09:31.617159: ---------------------------------------------
2025-10-13T08:09:31.617773: 
ğŸ“Š DATASET 1: PL_Neg_Waters_qTOF.mzML
2025-10-13T08:09:31.618497: ----------------------------------------
2025-10-13T08:09:31.619175: STEP 2.1: Loading data for quality assessment...
2025-10-13T08:09:31.660609:   ğŸ“‚ Loaded 143 spectra for quality analysis
2025-10-13T08:09:31.661453: STEP 2.2: Assessing individual spectrum quality...
2025-10-13T08:09:31.685938:   â±ï¸  Quality assessment completed in 0.02s
2025-10-13T08:09:31.689462:   ğŸ“ˆ Assessed 100 spectra
2025-10-13T08:09:31.690296: STEP 2.3: Calculating dataset-level quality statistics...
2025-10-13T08:09:31.733460:   ğŸ“Š Dataset Quality Statistics:
2025-10-13T08:09:31.734303:      Mean quality score: 0.677
2025-10-13T08:09:31.735120:      Quality std deviation: 0.103
2025-10-13T08:09:31.735931:      High quality spectra: 85
2025-10-13T08:09:31.737610:      Low quality spectra: 0
2025-10-13T08:09:31.739454: STEP 2.4: Analyzing quality filtering thresholds...
2025-10-13T08:09:31.740273:      Threshold 0.1: 100/100 pass (100.0%)
2025-10-13T08:09:31.741033:      Threshold 0.3: 100/100 pass (100.0%)
2025-10-13T08:09:31.741770:      Threshold 0.5: 88/100 pass (88.0%)
2025-10-13T08:09:31.742656:      Threshold 0.7: 62/100 pass (62.0%)
2025-10-13T08:09:31.743459:      Threshold 0.9: 0/100 pass (0.0%)
2025-10-13T08:09:31.744202: STEP 2.5: Assessing quality control effectiveness...
2025-10-13T08:09:31.745300:   ğŸ¯ Quality Control Effectiveness:
2025-10-13T08:09:31.745924:      Quality score range: 0.474
2025-10-13T08:09:31.746618:      Quality variance: 0.0123
2025-10-13T08:09:31.747312:      Effectiveness score: 1.00/1.00
2025-10-13T08:09:31.747936: STEP 2.6: Quality control performance classification...
2025-10-13T08:09:31.748626:   ğŸ† Quality Control Performance: ğŸŸ¢ EXCELLENT
2025-10-13T08:09:31.749277:   ğŸ¯ Optimal threshold: 0.7
2025-10-13T08:09:31.749980: âœ… Dataset 1 quality control validation completed
2025-10-13T08:09:31.750679: 
ğŸ“Š DATASET 2: TG_Pos_Thermo_Orbi.mzML
2025-10-13T08:09:31.751394: ----------------------------------------
2025-10-13T08:09:31.752024: STEP 2.1: Loading data for quality assessment...
2025-10-13T08:09:31.785140:   ğŸ“‚ Loaded 137 spectra for quality analysis
2025-10-13T08:09:31.785989: STEP 2.2: Assessing individual spectrum quality...
2025-10-13T08:09:31.814809:   â±ï¸  Quality assessment completed in 0.03s
2025-10-13T08:09:31.815738:   ğŸ“ˆ Assessed 100 spectra
2025-10-13T08:09:31.816443: STEP 2.3: Calculating dataset-level quality statistics...
2025-10-13T08:09:31.856498:   ğŸ“Š Dataset Quality Statistics:
2025-10-13T08:09:31.857244:      Mean quality score: 0.656
2025-10-13T08:09:31.857861:      Quality std deviation: 0.118
2025-10-13T08:09:31.858464:      High quality spectra: 68
2025-10-13T08:09:31.859261:      Low quality spectra: 0
2025-10-13T08:09:31.860105: STEP 2.4: Analyzing quality filtering thresholds...
2025-10-13T08:09:31.860837:      Threshold 0.1: 100/100 pass (100.0%)
2025-10-13T08:09:31.861716:      Threshold 0.3: 100/100 pass (100.0%)
2025-10-13T08:09:31.862501:      Threshold 0.5: 88/100 pass (88.0%)
2025-10-13T08:09:31.863231:      Threshold 0.7: 53/100 pass (53.0%)
2025-10-13T08:09:31.864133:      Threshold 0.9: 0/100 pass (0.0%)
2025-10-13T08:09:31.864836: STEP 2.5: Assessing quality control effectiveness...
2025-10-13T08:09:31.866161:   ğŸ¯ Quality Control Effectiveness:
2025-10-13T08:09:31.866919:      Quality score range: 0.510
2025-10-13T08:09:31.867544:      Quality variance: 0.0126
2025-10-13T08:09:31.868214:      Effectiveness score: 1.00/1.00
2025-10-13T08:09:31.868988: STEP 2.6: Quality control performance classification...
2025-10-13T08:09:31.870628:   ğŸ† Quality Control Performance: ğŸŸ¢ EXCELLENT
2025-10-13T08:09:31.872451:   ğŸ¯ Optimal threshold: 0.7
2025-10-13T08:09:31.873210: âœ… Dataset 2 quality control validation completed
2025-10-13T08:09:31.873833: 
============================================================
2025-10-13T08:09:31.874574: ğŸ“Š STEP 2 OVERALL QUALITY CONTROL ANALYSIS
2025-10-13T08:09:31.875253: ============================================================
2025-10-13T08:09:31.876800: ğŸ”¢ STEP 2 PERFORMANCE METRICS:
2025-10-13T08:09:31.877568:    Successful quality assessments: 2/2
2025-10-13T08:09:31.878221:    Success rate: 100.0%
2025-10-13T08:09:31.878912:    Total spectra assessed: 200
2025-10-13T08:09:31.879856:    Average assessment time: 0.03s per dataset
2025-10-13T08:09:31.880771:    Overall mean quality: 0.670
2025-10-13T08:09:31.881536:    Quality score variation: 0.112
2025-10-13T08:09:31.882115:    Assessment rate: 3890.6 spectra/s
2025-10-13T08:09:31.882806: 
ğŸ¯ CROSS-DATASET THRESHOLD ANALYSIS:
2025-10-13T08:09:31.883453:    Threshold 0.1: 100.0% pass rate
2025-10-13T08:09:31.884109:    Threshold 0.3: 100.0% pass rate
2025-10-13T08:09:31.884951:    Threshold 0.5: 88.0% pass rate
2025-10-13T08:09:31.885914:    Threshold 0.7: 57.5% pass rate
2025-10-13T08:09:31.888261:    Threshold 0.9: 0.0% pass rate
2025-10-13T08:09:31.889488: 
ğŸ¯ STEP 2 CONCLUSION:
2025-10-13T08:09:31.890319:    ğŸŸ¢ QUALITY CONTROL VALIDATION PASSED - Effective spectrum filtering
2025-10-13T08:09:31.891051: 
ğŸ’¾ SAVING STEP 2 RESULTS
2025-10-13T08:09:31.891826: ------------------------------
2025-10-13T08:09:31.895259: ğŸ’¥ CRITICAL STEP 2 FAILURE: Object of type bool is not JSON serializable
2025-10-13T08:09:34.347286: Error details: Traceback (most recent call last):
  File "C:\Users\kundai\Documents\bioinformatics\lavoisier\validation\step_02_quality_control_experiment.py", line 386, in main
    json.dump(step_results, f, indent=2)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kundai\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 179, in dump
    for chunk in iterable:
                 ^^^^^^^^
  File "C:\Users\kundai\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 433, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "C:\Users\kundai\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 407, in _iterencode_dict
    yield from chunks
  File "C:\Users\kundai\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 407, in _iterencode_dict
    yield from chunks
  File "C:\Users\kundai\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 407, in _iterencode_dict
    yield from chunks
  [Previous line repeated 1 more time]
  File "C:\Users\kundai\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 440, in _iterencode
    o = _default(o)
  File "C:\Users\kundai\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type bool is not JSON serializable

