{
  "step_metadata": {
    "step_number": 4,
    "step_name": "Spectrum Embedding Validation",
    "start_time": "2025-10-13T22:09:45.629559",
    "objective": "Validate spectrum embedding and similarity analysis capabilities",
    "available_methods": [
      "spec2vec",
      "stellas",
      "fingerprint"
    ]
  },
  "embedding_results": {
    "PL_Neg_Waters_qTOF.mzML": {
      "spectra_processed": 30,
      "total_embedding_time": 0.1083829402923584,
      "embedding_rate": 830.3889870235002,
      "method_results": {
        "spec2vec": {
          "embedding_time": 0.01636791229248047,
          "embeddings_created": 30,
          "embedding_errors": 0,
          "success_rate": 1.0,
          "embedding_dimension": 100,
          "avg_vector_magnitude": 5.627721162898672,
          "magnitude_std": 0.24840056774461527,
          "diversity_score": 1.0,
          "embedding_rate": 1832.8543960846007
        },
        "stellas": {
          "embedding_time": 0.08715391159057617,
          "embeddings_created": 30,
          "embedding_errors": 0,
          "success_rate": 1.0,
          "embedding_dimension": 128,
          "avg_vector_magnitude": 36.41502516142608,
          "magnitude_std": 38.44411523017868,
          "diversity_score": 1.0,
          "embedding_rate": 344.21862946245386
        },
        "fingerprint": {
          "embedding_time": 0.004861116409301758,
          "embeddings_created": 30,
          "embedding_errors": 0,
          "success_rate": 1.0,
          "embedding_dimension": 256,
          "avg_vector_magnitude": 2.0388054292106133,
          "magnitude_std": 1.3227800838920956,
          "diversity_score": 1.0,
          "embedding_rate": 6171.421845112561
        }
      },
      "similarity_results": {
        "spec2vec": {
          "similarity_search_time": 0.0003085136413574219,
          "similar_spectra_found": 5,
          "avg_similarity_score": 0.7813836689518834,
          "max_similarity_score": 0.7945387653932638,
          "min_similarity_score": 0.7738329964009139,
          "similarity_range": 0.020705768992349993,
          "search_rate": 29000.0
        },
        "stellas": {
          "similarity_search_time": 0.0002987384796142578,
          "similar_spectra_found": 5,
          "avg_similarity_score": 0.6153455127125192,
          "max_similarity_score": 0.6604631949889668,
          "min_similarity_score": 0.5773587782686009,
          "similarity_range": 0.08310441672036584,
          "search_rate": 29000.0
        },
        "fingerprint": {
          "similarity_search_time": 0.0003094673156738281,
          "similar_spectra_found": 5,
          "avg_similarity_score": 0.13146643888860804,
          "max_similarity_score": 0.1588565439674904,
          "min_similarity_score": 0.11396468023256891,
          "similarity_range": 0.0448918637349215,
          "search_rate": 29000.0
        }
      },
      "method_comparison": {
        "spec2vec": {
          "comparison_score": 0.8242476548388977,
          "relative_performance": 0.8242476548388977
        },
        "stellas": {
          "comparison_score": 0.7639440569005609,
          "relative_performance": 0.7639440569005609
        },
        "fingerprint": {
          "comparison_score": 1.0,
          "relative_performance": 1.0
        }
      },
      "quality_metrics": {
        "total_embeddings_created": 90,
        "avg_success_rate": 1.0,
        "effective_methods": 3,
        "quality_score": 1.0
      },
      "performance_grade": "\ud83d\udfe2 EXCELLENT"
    },
    "TG_Pos_Thermo_Orbi.mzML": {
      "spectra_processed": 30,
      "total_embedding_time": 0.1038367748260498,
      "embedding_rate": 866.7449480280031,
      "method_results": {
        "spec2vec": {
          "embedding_time": 0.012842178344726562,
          "embeddings_created": 30,
          "embedding_errors": 0,
          "success_rate": 1.0,
          "embedding_dimension": 100,
          "avg_vector_magnitude": 5.671634114686145,
          "magnitude_std": 0.25747350991351836,
          "diversity_score": 1.0,
          "embedding_rate": 2336.0522798158327
        },
        "stellas": {
          "embedding_time": 0.08669447898864746,
          "embeddings_created": 30,
          "embedding_errors": 0,
          "success_rate": 1.0,
          "embedding_dimension": 128,
          "avg_vector_magnitude": 26.89587633856507,
          "magnitude_std": 30.98772158723836,
          "diversity_score": 1.0,
          "embedding_rate": 346.04279707279244
        },
        "fingerprint": {
          "embedding_time": 0.004300117492675781,
          "embeddings_created": 30,
          "embedding_errors": 0,
          "success_rate": 1.0,
          "embedding_dimension": 256,
          "avg_vector_magnitude": 1.8201147304820866,
          "magnitude_std": 1.612093741536727,
          "diversity_score": 1.0,
          "embedding_rate": 6976.553559547571
        }
      },
      "similarity_results": {
        "spec2vec": {
          "similarity_search_time": 0.00038695335388183594,
          "similar_spectra_found": 5,
          "avg_similarity_score": 0.8018740941421456,
          "max_similarity_score": 0.8166082391714304,
          "min_similarity_score": 0.7871167820423212,
          "similarity_range": 0.029491457129109278,
          "search_rate": 29000.0
        },
        "stellas": {
          "similarity_search_time": 0.0007760524749755859,
          "similar_spectra_found": 5,
          "avg_similarity_score": 0.41702698682133443,
          "max_similarity_score": 0.5241306086151069,
          "min_similarity_score": 0.3567822165251572,
          "similarity_range": 0.16734839208994967,
          "search_rate": 29000.0
        },
        "fingerprint": {
          "similarity_search_time": 0.0005495548248291016,
          "similar_spectra_found": 5,
          "avg_similarity_score": 0.2805053700725604,
          "max_similarity_score": 0.3172720539349513,
          "min_similarity_score": 0.26355254343845413,
          "similarity_range": 0.05371951049649715,
          "search_rate": 29000.0
        }
      },
      "method_comparison": {
        "spec2vec": {
          "comparison_score": 0.8337108272686766,
          "relative_performance": 0.8337108272686766
        },
        "stellas": {
          "comparison_score": 0.7624002057075598,
          "relative_performance": 0.7624002057075598
        },
        "fingerprint": {
          "comparison_score": 1.0,
          "relative_performance": 1.0
        }
      },
      "quality_metrics": {
        "total_embeddings_created": 90,
        "avg_success_rate": 1.0,
        "effective_methods": 3,
        "quality_score": 1.0
      },
      "performance_grade": "\ud83d\udfe2 EXCELLENT"
    }
  },
  "similarity_analysis": {
    "avg_similarity_score": 0.5046003452648419,
    "similarity_tests_performed": 6,
    "method_effectiveness": {
      "spec2vec": {
        "total_embeddings": 60,
        "avg_time_per_embedding": 0.00048683484395345054,
        "dimensions": 100,
        "effectiveness_score": 60.0
      },
      "stellas": {
        "total_embeddings": 60,
        "avg_time_per_embedding": 0.002897473176320394,
        "dimensions": 128,
        "effectiveness_score": 60.0
      },
      "fingerprint": {
        "total_embeddings": 60,
        "avg_time_per_embedding": 0.00015268723169962564,
        "dimensions": 256,
        "effectiveness_score": 60.0
      }
    }
  },
  "embedding_quality_metrics": {
    "successful_embeddings": 2,
    "total_datasets": 2,
    "success_rate": 1.0,
    "avg_embedding_time": 0.1061098575592041,
    "total_embeddings_created": 180,
    "avg_similarity_score": 0.5046003452648419,
    "methods_tested": 3,
    "effective_methods": 3
  },
  "step_conclusion": {
    "overall_assessment": "\ud83d\udfe2 EMBEDDING VALIDATION PASSED - Effective spectrum embedding capabilities",
    "step_status": "validated",
    "success_rate": 1.0,
    "total_embeddings_created": 180,
    "best_performing_method": "spec2vec",
    "key_findings": [
      "Embedding success rate: 100.0%",
      "Total embeddings created: 180",
      "Average similarity score: 0.505",
      "Most effective method: spec2vec"
    ],
    "recommendations": [
      "Embedding capabilities are comprehensive",
      "Prioritize spec2vec method",
      "Embedding speed is acceptable",
      "Similarity search is functional"
    ]
  }
}